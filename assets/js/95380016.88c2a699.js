"use strict";(self.webpackChunkwebsitev_3=self.webpackChunkwebsitev_3||[]).push([[8685],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8215:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(7294);function a(e){var t=e.children,n=e.hidden,a=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},9877:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(7462),a=n(7294),l=n(2389),i=n(5979),o=n(6010),s="tabItem_LplD";function u(e){var t,n,l,u=e.lazy,p=e.block,c=e.defaultValue,d=e.values,m=e.groupId,h=e.className,f=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=d?d:f.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,i.lx)(b,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===c?c:null!=(t=null!=c?c:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(l=f[0])?void 0:l.props.value;if(null!==g&&!b.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,i.UB)(),y=k.tabGroupChoices,N=k.setTabGroupChoices,w=(0,a.useState)(g),T=w[0],O=w[1],x=[],q=(0,i.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var j=y[m];null!=j&&j!==T&&b.some((function(e){return e.value===j}))&&O(j)}var C=function(e){var t=e.currentTarget,n=x.indexOf(t),r=b[n].value;r!==T&&(q(t),O(r),null!=m&&N(m,r))},E=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=x.indexOf(e.currentTarget)+1;n=x[r]||x[0];break;case"ArrowLeft":var a=x.indexOf(e.currentTarget)-1;n=x[a]||x[x.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":p},h)},b.map((function(e){var t=e.value,n=e.label,l=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return x.push(e)},onKeyDown:E,onFocus:C,onClick:C},l,{className:(0,o.Z)("tabs__item",s,null==l?void 0:l.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),u?(0,a.cloneElement)(f.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function p(e){var t=(0,l.Z)();return a.createElement(u,(0,r.Z)({key:String(t)},e))}},8975:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return p},default:function(){return f},frontMatter:function(){return u},metadata:function(){return c},toc:function(){return m}});var r=n(7462),a=n(3366),l=(n(7294),n(3905)),i=n(9877),o=n(8215),s=["components"],u={id:"graphql",title:"GraphQL",sidebar_label:"GraphQL",sidebar_position:2},p=void 0,c={unversionedId:"modules/graphql",id:"modules/graphql",title:"GraphQL",description:"Orionjs is deeply integrated with GraphQL. It generates automatically the schemas and all boilerplate code. It supports subscriptions over websockets and uses Apollo Server. It only requires few lines of configuration to get started.",source:"@site/docs/modules/graphql.md",sourceDirName:"modules",slug:"/modules/graphql",permalink:"/docs/modules/graphql",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/modules/graphql.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"graphql",title:"GraphQL",sidebar_label:"GraphQL",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Jobs",permalink:"/docs/basics/jobs"},next:{title:"HTTP",permalink:"/docs/modules/http"}},d={},m=[{value:"Install package",id:"install-package",level:2},{value:"Starting the GraphQL Server",id:"starting-the-graphql-server",level:2},{value:"GraphiQL",id:"graphiql",level:3},{value:"Subscriptions",id:"subscriptions",level:2},{value:"Sending updates",id:"sending-updates",level:3}],h={toc:m};function f(e){var t=e.components,n=(0,a.Z)(e,s);return(0,l.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Orionjs is deeply integrated with GraphQL. It generates automatically the schemas and all boilerplate code. It supports subscriptions over websockets and uses Apollo Server. It only requires few lines of configuration to get started."),(0,l.kt)("h2",{id:"install-package"},"Install package"),(0,l.kt)(i.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,l.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @orion-js/graphql\n"))),(0,l.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @orion-js/graphql\n")))),(0,l.kt)("h2",{id:"starting-the-graphql-server"},"Starting the GraphQL Server"),(0,l.kt)("p",null,"Create a file that it's included on the startup of your app that calls the ",(0,l.kt)("inlineCode",{parentName:"p"},"startGraphQL")," function."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="app/index.ts"',title:'"app/index.ts"'},"import {startGraphQL} from '@orion-js/graphql'\nimport resolvers from 'app/resolvers'\n\nstartGraphQL({\n  resolvers,\n  useGraphiql\n})\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"resolvers"),": An object with all the resolvers of your app."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"subscriptions?"),": An object containing all the subscriptions of your app."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"executeGraphQLCache?"),": A function that executes the http level cache of graphql queries."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"useGraphiql?"),": A boolean to set up the graphiQL in-browser IDE for exploring GraphQL. Defaults to ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"app?"),": Pass another express app.")),(0,l.kt)("p",null,"If you follow the ",(0,l.kt)("a",{parentName:"p",href:"../getting-started/installation"},"GraphQL installation example"),", you will find a structure like the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"app\n\u2514\u2500\u2500 services\n    \u251c\u2500\u2500 graphql\n    \u2502   \u2514\u2500\u2500 index.ts\n    \u2514\u2500\u2500 index.ts\n")),(0,l.kt)("p",null,"In ",(0,l.kt)("inlineCode",{parentName:"p"},"app/services/graphql/index.ts "),"."),(0,l.kt)("h3",{id:"graphiql"},"GraphiQL"),(0,l.kt)("p",null,"When running the server app, you can check the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/graphql/graphiql"},(0,l.kt)("inlineCode",{parentName:"a"},"GraphiQL"))," GraphQL IDE for testing queries and mutations by following the next URL:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"http://localhost:3000/graphiql\n")),(0,l.kt)("h2",{id:"subscriptions"},"Subscriptions"),(0,l.kt)("p",null,"To define a subscription you must call the ",(0,l.kt)("inlineCode",{parentName:"p"},"subscription")," function."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import {subscription} from '@orion-js/graphql'\n\nconst mySubscription = subscription({\n  params,\n  returns\n})\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"params"),": The options of the subscription. A hash with a mix between the params and the subscription name will be the id of the channel."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"returns"),": A Model or a Type that is returned on every update."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"checkPermission"),": A function called every time the subscription is initialized. The string returned will be the permissions error code.")),(0,l.kt)("h3",{id:"sending-updates"},"Sending updates"),(0,l.kt)("p",null,"To send an update you must call the subscription."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"await mySubscription(params, updatedItem)\n")))}f.isMDXComponent=!0}}]);