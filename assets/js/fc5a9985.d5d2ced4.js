"use strict";(self.webpackChunkwebsitev_3=self.webpackChunkwebsitev_3||[]).push([[4942],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(n),m=i,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||a;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<a;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4367:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return c}});var r=n(7462),i=n(3366),a=(n(7294),n(3905)),o=["components"],s={id:"graphql",title:"GraphQL",sidebar_label:"GraphQL",sidebar_position:2},l=void 0,p={unversionedId:"modules/graphql",id:"version-2.x/modules/graphql",title:"GraphQL",description:"Orionjs is deeply integrated with GraphQL. It generates automatically the schemas and all boilerplate code. It supports subscriptions over websockets and uses Apollo Server. It only requires few lines of configuration to get started.",source:"@site/versioned_docs/version-2.x/modules/graphql.md",sourceDirName:"modules",slug:"/modules/graphql",permalink:"/docs/2.x/modules/graphql",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/modules/graphql.md",tags:[],version:"2.x",sidebarPosition:2,frontMatter:{id:"graphql",title:"GraphQL",sidebar_label:"GraphQL",sidebar_position:2},sidebar:"version-2.x/tutorialSidebar",previous:{title:"Authentication",permalink:"/docs/2.x/modules/authentication"},next:{title:"HTTP",permalink:"/docs/2.x/modules/http"}},u={},c=[{value:"Subscriptions",id:"subscriptions",level:2},{value:"Sending updates",id:"sending-updates",level:3},{value:"GraphiQL",id:"graphiql",level:2}],d={toc:c};function m(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Orionjs is deeply integrated with GraphQL. It generates automatically the schemas and all boilerplate code. It supports subscriptions over websockets and uses Apollo Server. It only requires few lines of configuration to get started."),(0,a.kt)("p",null,"##\xa0Starting the GraphQL Server"),(0,a.kt)("p",null,"Create a file that it's included on the startup of your app that calls the ",(0,a.kt)("inlineCode",{parentName:"p"},"startGraphQL")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import {startGraphQL} from '@orion-js/graphql'\nimport resolvers from 'app/resolvers'\n\nstartGraphQL({\n  resolvers,\n  subscriptions,\n  pubsub,\n  useGraphiql\n})\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"resolvers"),": An object with all the resolvers of your app. If you pass the option ",(0,a.kt)("inlineCode",{parentName:"li"},"private: true")," when creating the resolver, it will be omitted (see ",(0,a.kt)("a",{parentName:"li",href:"https://orionjs.com/docs/resolvers"},(0,a.kt)("inlineCode",{parentName:"a"},"Resolvers")),")."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"subscriptions"),": An object containing all the subscriptions of your app."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"pubsub"),": Only required if you use subscriptions. A pubsub implementation compatible with ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apollographql/graphql-subscriptions#pubsub-implementations"},"apollo-subscriptions"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"useGraphiql"),": A boolean to set up the graphiQL in-browser IDE for exploring GraphQL. Defaults to ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),".")),(0,a.kt)("p",null,"By default, Orionjs provides this functionality in the ",(0,a.kt)("inlineCode",{parentName:"p"},"index")," file of the ",(0,a.kt)("inlineCode",{parentName:"p"},"services/graphql")," folder:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"server\n\u2514\u2500\u2500 app\n    \u2514\u2500\u2500 services\n        \u251c\u2500\u2500 graphql\n        \u2502   \u2514\u2500\u2500 index.js\n        \u2514\u2500\u2500 index.js\n")),(0,a.kt)("p",null,"In this file, Orionjs also provides a basic ",(0,a.kt)("a",{parentName:"p",href:"https://orionjs.com/docs/http#cors"},"CORS")," configuration for your app."),(0,a.kt)("h2",{id:"subscriptions"},"Subscriptions"),(0,a.kt)("p",null,"To define a subscription you must call the ",(0,a.kt)("inlineCode",{parentName:"p"},"subscription")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import {subscription} from '@orion-js/graphql'\n\nconst mySubscription = subscription({\n  params,\n  returns\n})\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"params"),": The options of the subscription. A hash with a mix between the params and the subscription name will be the id of the channel."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"returns"),": A Model or a Type that is returned on every update."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"checkPermission"),": A function called every time the subscription is initialized. The string returned will be the permissions error code.")),(0,a.kt)("h3",{id:"sending-updates"},"Sending updates"),(0,a.kt)("p",null,"To send an update you must call the subscription."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"await mySubscription(params, updatedItem)\n")),(0,a.kt)("h2",{id:"graphiql"},"GraphiQL"),(0,a.kt)("p",null,"When running the server app, you can check the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/graphql/graphiql"},(0,a.kt)("inlineCode",{parentName:"a"},"GraphiQL"))," GraphQL IDE for testing queries and mutations by following the next URL:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"http://localhost:3000/graphiql\n")))}m.isMDXComponent=!0}}]);